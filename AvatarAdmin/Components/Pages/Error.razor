@page "/Error"
@using System.Diagnostics

<PageTitle>Error</PageTitle>

<div class="error-card">
  <h3>Algo no salió bien</h3>
  <p>Se produjo un error mientras procesábamos tu solicitud.</p>

  @if (ShowRequestId)
  {
    <p class="mt-2">
      <strong>Request ID:</strong> <code>@RequestId</code>
    </p>
  }

  <div class="error-actions mt-3">
    <a class="btn btn-primary" href="/">Volver al inicio</a>
    <button class="btn btn-outline-light" onclick="location.reload()">Reintentar</button>
  </div>

  <details class="mt-3">
    <summary>Consejo</summary>
    <p class="mb-0">En desarrollo, activa el entorno <strong>Development</strong> para ver el detalle de la excepción.</p>
  </details>
</div>

@code{
  [CascadingParameter] private HttpContext? HttpContext { get; set; }
  private string? RequestId { get; set; }
  private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);
  protected override void OnInitialized() =>
      RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
