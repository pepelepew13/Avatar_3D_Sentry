@inject NavigationManager Nav

@code {
    protected override void OnInitialized()
    {
        try
        {
            var abs = Nav.Uri;
            var rel = Nav.ToBaseRelativePath(abs);
            var currentRel = "/" + (string.IsNullOrEmpty(rel) ? "" : rel);
            if (string.IsNullOrEmpty(rel)) currentRel = "/";

            Nav.NavigateTo($"/auth?returnUrl={Uri.EscapeDataString(currentRel)}", replace: true);
        }
        catch
        {
            Nav.NavigateTo("/auth", replace: true);
        }
    }
}
